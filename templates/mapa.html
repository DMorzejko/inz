<!-- Mapa -->
<div class="form">
    <div class="form-tytul">
        <div class="ikona2"></div>
        <span class="tytul2"><h2>Tu powinna być wyświetlana mapa.</h2></span>
        <br><br>
    </div>
    <div id="map" style="center"></div>
    <script>
        var obiekty_json = '{{ obiekty_json|safe }}';
    </script>
</div>
<!-- Mapa -->



<!-- Skrypt inicjalizujący mapę -->


<script>
    var obiekty = JSON.parse(obiekty_json);
    var map;

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: { lat: 52.2297, lng: 21.0122 }, // Centrum mapy, np. Warszawa
            zoom: 6
        });

        obiekty.forEach(function (obiekt) {
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode({
                address: obiekt.Ulica + ' ' + obiekt.Numer_Budynku + ', ' + obiekt.Kod_Pocztowy + ' ' + obiekt.Miasto
            }, function (results, status) {
                if (status === 'OK') {
                    var marker = new google.maps.Marker({
                        map: map,
                        position: results[0].geometry.location,
                        title: obiekt.Nazwa
                    });
                } else {
                    console.log('Geocode was not successful for the following reason: ' + status);
                }
            });
        });
    }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAznj5An3LQaZ3Lo-5NcjT895dFvgyQwg8&callback=initMap"></script>
